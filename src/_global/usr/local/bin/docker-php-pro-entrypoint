#!/bin/sh
set -e

# Execute scripts from /etc/entrypoint.d/
for f in /etc/entrypoint.d/*; do
    [ -e "$f" ] || continue  # skip if not exists
    case "$f" in
        *.sh)     . "$f" ;;
        *)        echo "$0: Invalid extension. Ignoring $f" ;;
    esac
    echo
done

# first arg is `-f` or `--some-option`
if [ "${1#-}" != "$1" ]; then
	set -- php "$@"
fi

exec "$@"